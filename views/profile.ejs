<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="/stylesheets/profile.css">

        <style>
            .material-symbols-outlined {
              font-variation-settings:
              'FILL' 0,
              'wght' 400,
              'GRAD' 0,
              'opsz' 24
            }
        </style>
    </head>
    <body class=" backdrop-blur-[px]">
        <div class=" relative h-screen ">

            <a href="/logout" class=" gap-1 flex justify-center items-center absolute right-4 py-2 px-3 top-3 text-white bg-red-500 rounded">
                <span class="material-symbols-outlined">move_item </span><span> logout</span>
            </a>    

            <div class="w-full flex justify-center">
                <div class=" wrapper mt-5">
                    <form method="post" action="/post">
                        <h4 class=" text-center font-light text-base ">@<%= user.username %></h4>
                        <h1>Create Post</h1>
                        <div class="input-box">
                            <input type="url" placeholder="Image URL " name="img" >
                        </div>
                        <div class="input-box">
                            <input type="text" placeholder="caption" name="caption" >
                        </div>
                        <button type="submit" class="btn">Create</button>
                    </form>
                </div>
            </div>


            <div class="post-container w-full flex justify-center mt-4 gap-5 flex-wrap ">
                <%  user.posts.forEach(function(post){ %>
                    <div class="post h-[320px] max-w-60 overflow-hidden">
                        <div class=" py-1 bg-[#ffffff15]">
                            <h3 class=" px-2  text-xl ">@<%= user.username %></h3>
                            <p class=" px-2 text-xs font-extralight text-white" ><%= post.date.month %> </p>
                        </div>
                        <div class=" px-2 bg-[#ffffff15]"><img class=" w-56 h-52 rounded" src=" <%= post.img %> " alt="image"/></div>
                        <div class=" bg-[#ffffff15]"><p class=" py-1 px-2 font-extralight  text-neutral-200 text-sm"> <%= post.caption %>  </p></div>
                        <div class=" flex justify-evenly text-sm py-2 bg-[#ffffff15]">

                            
                           
                         
                            <% (post.likes.indexOf(user._id) === -1)  %>
                            <a class="flex items-center gap-1" href="/like/<%= post._id %>">
                                <span class="text-white text-lg"><%= post.likes.length %></span>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" class="w-6 h-6">
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"/>
                                </svg>
                            </a>
                           
                            <a href="/edit/ <%= post._id %> "> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" class="w-6 h-6">
                                <path strokeLinecap="round" strokeLinejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                            </svg> </a>
                              
                                
                            <a href="/delete/ <%= post._id %>"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"  strokeWidth={1.5} stroke="currentColor" class="w-6 h-6">
                                <path strokeLinecap="round" strokeLinejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                            </svg></a>
                              
                              
                        </div>
                    </div>
                <% }) %>
            </div>

        </div>       
    <script src="/scripts/index.js" async defer></script>
    </body>
</html>